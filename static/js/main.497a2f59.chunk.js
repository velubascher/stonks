(this["webpackJsonpstonks-app"]=this["webpackJsonpstonks-app"]||[]).push([[0],{122:function(e,t){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(9),r=n.n(o),i=(n(92),n(20)),l=n(69),s=n(70),u=n(25),m=n(79),h=n(78),d=(n(93),n(71)),k=n.n(d),p=n(176),E=n(168),f=n(169),g=n(170),v=n(171),S=n(175),b=n(173),y=n(174),C=n(161),w=n(165),x=n(166),j=n(167);var O=function(e){var t=e.stock,n=e.buy,a=e.sell,o=e.update;return c.a.createElement(C.a,{"aria-label":"simple table"},c.a.createElement(w.a,null,c.a.createElement(x.a,{key:"volumen total transado"},c.a.createElement(j.a,{component:"th",scope:"row"},"Volumen Transado"),c.a.createElement(j.a,{align:"right"},t?function(e,t,n){return t.filter((function(t){return t.ticker===e})).reduce((function(e,t){return e+t.volume}),0)+n.filter((function(t){return t.ticker===e})).reduce((function(e,t){return e+t.volume}),0)}(t.ticker,n,a):0)),c.a.createElement(x.a,{key:"alto historico"},c.a.createElement(j.a,{component:"th",scope:"row"},"Alto Hist\xf3rico"),c.a.createElement(j.a,{align:"right"},o&&o.length>0?function(e){var t=e.map((function(e){return e.value}));return Math.max.apply(Math,Object(i.a)(t))}(o):0)),c.a.createElement(x.a,{key:"bajo historico"},c.a.createElement(j.a,{component:"th",scope:"row"},"Bajo Hist\xf3rico"),c.a.createElement(j.a,{align:"right"},o&&o.length>0?function(e){var t=e.map((function(e){return e.value}));return Math.min.apply(Math,Object(i.a)(t))}(o):0)),c.a.createElement(x.a,{key:"ultimo precio"},c.a.createElement(j.a,{component:"th",scope:"row"},"\xdaltimo precio"),c.a.createElement(j.a,{align:"right"},o&&o.length>0?o[o.length-1].value:0)),c.a.createElement(x.a,{key:"variacion porcentual"},c.a.createElement(j.a,{component:"th",scope:"row"},"Variaci\xf3n Porcentual"),c.a.createElement(j.a,{align:"right"},o&&o.length>1?function(e){var t=e[e.length-1].value,n=e[e.length-2].value;return((t-n)/n*100).toFixed(4)}(o):0,"%"))))};function D(e,t){for(var n=0,a=function(a){n+=t.filter((function(t){return t.ticker===e[a]})).reduce((function(e,t){return e+t.volume}),0)},c=0;c<e.length;c++)a(c);return n}function M(e,t,n){var a=t[e].listed_companies;return n.map((function(e){return a.includes(e.company_name)?e.ticker:null})).filter((function(e){return e}))}var A=function(e){var t,n=e.exchange,a=e.exchanges,o=e.stocks,r=e.buy,i=e.sell;n&&a&&o&&(t=M(n,a,o));var l=t&&D(t,r)||0,s=t&&D(t,i)||0;return c.a.createElement(C.a,{"aria-label":"simple table"},c.a.createElement(x.a,{key:"volumen compra"},c.a.createElement(j.a,{component:"th",scope:"row"},"Volumen Compra"),c.a.createElement(j.a,{align:"right"},l)),c.a.createElement(x.a,{key:"volumen venta"},c.a.createElement(j.a,{component:"th",scope:"row"},"Volumen Venta"),c.a.createElement(j.a,{align:"right"},s)),c.a.createElement(x.a,{key:"volumen total"},c.a.createElement(j.a,{component:"th",scope:"row"},"Volumen Total"),c.a.createElement(j.a,{align:"right"},s+l)),c.a.createElement(x.a,{key:"cantidad acciones"},c.a.createElement(j.a,{component:"th",scope:"row"},"Cantidad de Acciones"),c.a.createElement(j.a,{align:"right"},t&&t.length||0)),c.a.createElement(x.a,{key:"participacion de mercado"},c.a.createElement(j.a,{component:"th",scope:"row"},"Participaci\xf3n de Mercado"),c.a.createElement(j.a,{align:"right"},t&&function(e,t,n,a,c,o){var r=0,i=[];return Object.keys(t).forEach((function(o){o!==e&&(i=M(o,t,n),r+=D(i,a)+D(i,c))})),console.log("volume",o),console.log("total",r),(o/(o+r)*100).toFixed(4)}(n,a,o,r,i,s+l)||0,"%")))},B=n(80),N=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).connectSockets=function(){a.socket=k()("wss://le-18262636.bitzonte.com",{path:"/stocks"}),a.socket.on("UPDATE",(function(e){return a.setState((function(t){return{update:[].concat(Object(i.a)(t.update),[e])}}))})),a.socket.on("BUY",(function(e){return a.setState((function(t){return{buy:[].concat(Object(i.a)(t.buy),[e])}}))})),a.socket.on("SELL",(function(e){return a.setState((function(t){return{sell:[].concat(Object(i.a)(t.sell),[e])}}))})),a.socket.emit("STOCKS"),a.socket.emit("EXCHANGES"),a.socket.on("EXCHANGES",(function(e){return a.setState({exchanges:e})})),a.socket.on("STOCKS",(function(e){return a.setState({stocks:e,selectedStock:e[0]})}))},a.chart=c.a.createRef(),a.state={isConnected:!0,update:[],buy:[],sell:[],exchanges:[],stocks:[],selectedStock:null,selectedExchange:null},a.handleConnectClick=a.handleConnectClick.bind(Object(u.a)(a)),a.handleDisconnectClick=a.handleDisconnectClick.bind(Object(u.a)(a)),a}return Object(s.a)(n,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.connectSockets();var e=Object(B.a)(this.chart.current,{width:430,height:400});this.lineSeries=e.addLineSeries()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.update,n=e.selectedStock;if(n&&t){var a=t.filter((function(e){return e.ticker===n.ticker}));this.currentStockData=a,this.lineSeries.setData(this.currentStockData)}}},{key:"handleConnectClick",value:function(){this.connectSockets(),this.setState({isConnected:!0})}},{key:"handleDisconnectClick",value:function(){this.setState({isConnected:!1}),this.socket.close()}},{key:"render",value:function(){var e=this,t=this.state.isConnected;return c.a.createElement("div",{className:"App"},c.a.createElement(E.a,{maxWidth:"lg"},c.a.createElement(f.a,{container:!0,direction:"row",alignContent:"flex-start",spacing:1,className:"button"},c.a.createElement(f.a,{item:!0},t?c.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:this.handleDisconnectClick},"Desconectar"):c.a.createElement(g.a,{variant:"contained",color:"primary",onClick:this.handleConnectClick},"Conectar"))),c.a.createElement(f.a,{container:!0,spacing:2,justify:"space-between"},c.a.createElement(f.a,{item:!0,xs:8},c.a.createElement(v.a,{className:"paper",spacing:2},c.a.createElement("h3",null,"B\xfasqueda de Stocks"),c.a.createElement(f.a,{container:!0,spacing:5,alignContent:"center"},c.a.createElement(f.a,{item:!0},c.a.createElement(p.a,{id:"stock-selector",options:this.state.stocks,value:this.state.selectedStock,getOptionLabel:function(e){return e.ticker},style:{width:300},renderInput:function(e){return c.a.createElement(S.a,Object.assign({},e,{label:"Stocks",variant:"outlined"}))},onChange:function(t,n){e.setState({selectedStock:n})}})),c.a.createElement(f.a,{container:!0,direction:"row",justify:"center",spacing:2},c.a.createElement(f.a,{item:!0,xs:7},c.a.createElement("div",{ref:this.chart})),c.a.createElement(f.a,{item:!0,xs:5},c.a.createElement(b.a,{component:v.a,variant:"outlined"},c.a.createElement("h4",null,this.state.selectedStock&&this.state.selectedStock.ticker),c.a.createElement("p",null,this.state.selectedStock&&this.state.selectedStock.company_name," - ",this.state.selectedStock&&this.state.selectedStock.country),c.a.createElement(y.a,null),c.a.createElement(O,{update:this.currentStockData,buy:this.state.buy,sell:this.state.sell,stock:this.state.selectedStock}))))))),c.a.createElement(f.a,{item:!0,xs:4},c.a.createElement(v.a,{className:"paper"},c.a.createElement("h3",null,"B\xfasqueda de Exchanges"),c.a.createElement(p.a,{id:"exchanges-selector",options:Object.keys(this.state.exchanges),style:{width:300},renderInput:function(e){return c.a.createElement(S.a,Object.assign({},e,{label:"Exchanges",variant:"outlined"}))},onChange:function(t,n){e.setState({selectedExchange:n})}}),c.a.createElement(A,{update:this.currentStockData,buy:this.state.buy,sell:this.state.sell,exchange:this.state.selectedExchange,exchanges:this.state.exchanges,stocks:this.state.stocks})))),c.a.createElement(f.a,{container:!0})))}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(128)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.497a2f59.chunk.js.map